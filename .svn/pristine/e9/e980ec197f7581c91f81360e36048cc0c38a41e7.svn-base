<template>
  <div class="product-detail-wraper">
    <div class="block-5rem" />
    <ProductInfo :prod="prod" class="prod-info" @select="selectHandle" />
    <ProductDesc />
    <ProductSelect :show="showProdSelect" @close="closeHandle" @select="prodSelecthandle" />
    <div class="block-5rem" />
    <CarBar @add-to-car="addToCarHandle" @buy="buyHandle" />
  </div>
</template>
<script>
import prods from "./mock/prods.json";
import {
  ProductInfo,
  ProductDesc,
  ProductSelect,
  CarBar
} from "@/components/ProductDetail";
export default {
  components: {
    ProductInfo,
    ProductDesc,
    ProductSelect,
    CarBar
  },
  data() {
    return {
      prod: {},
      showProdSelect: false
    };
  },
  methods: {
    closeHandle() {
      this.showProdSelect = false;
    },
    selectHandle() {
      this.showProdSelect = true;
    },
    navToPurchasePage() {
      this.$router.push({
        path: `/purchase/805`
      });
    },
    addToCarHandle() {
      //if not selectd then  show selections
      // this.showProdSelect = true;
      this.navToPurchasePage();
    },
    buyHandle() {
      //if not selectd then  show selections
      // this.showProdSelect = true;
      this.navToPurchasePage();
    },
    prodSelecthandle(val) {}
  },
  mounted() {
    const { id } = this.$route.params;
    const prod = prods.find(item => item.productId == id);
    this.prod = prod;
  }
};
</script>
<style lang="less" scoped>
.product-detail-wraper {
  .block-5rem {
    height: 4rem;
  }
  .prod-info {
    margin: 0.8rem 0;
  }
}
</style>
